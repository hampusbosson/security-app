generator client {
  provider = "prisma-client"
  output   = "./generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  id            Int            @id @default(autoincrement())
  githubId      Int            @unique
  username      String
  email         String?
  avatarUrl     String?
  createdAt     DateTime       @default(now())
  installations Installation[]
}

model Installation {
  id             Int          @id @default(autoincrement())
  installationId Int          @unique
  accountLogin   String?
  accountType    String?
  createdAt      DateTime     @default(now())
  userId         Int
  user           User         @relation(fields: [userId], references: [id])
  repositories   Repository[]
}

model Repository {
  id             Int          @id @default(autoincrement())
  githubRepoId   Int          @unique
  name           String
  fullName       String
  private        Boolean
  defaultBranch  String?
  createdAt      DateTime     @default(now())
  installationId Int
  installation   Installation @relation(fields: [installationId], references: [id])
}
